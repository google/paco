//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: joda-time/src/main/java/org/joda/time/tz/ZoneInfoCompiler.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/io/BufferedReader.h"
#include "java/io/DataOutputStream.h"
#include "java/io/File.h"
#include "java/io/FileInputStream.h"
#include "java/io/FileOutputStream.h"
#include "java/io/FileReader.h"
#include "java/io/IOException.h"
#include "java/io/InputStream.h"
#include "java/io/OutputStream.h"
#include "java/io/PrintStream.h"
#include "java/lang/Character.h"
#include "java/lang/Exception.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/IndexOutOfBoundsException.h"
#include "java/lang/Integer.h"
#include "java/lang/InternalError.h"
#include "java/lang/Long.h"
#include "java/lang/NumberFormatException.h"
#include "java/lang/Short.h"
#include "java/lang/System.h"
#include "java/util/ArrayList.h"
#include "java/util/Collection.h"
#include "java/util/Comparator.h"
#include "java/util/HashMap.h"
#include "java/util/List.h"
#include "java/util/Locale.h"
#include "java/util/Map.h"
#include "java/util/Set.h"
#include "java/util/StringTokenizer.h"
#include "java/util/TreeMap.h"
#include "org/joda/time/Chronology.h"
#include "org/joda/time/DateTime.h"
#include "org/joda/time/DateTimeField.h"
#include "org/joda/time/DateTimeZone.h"
#include "org/joda/time/LocalDate.h"
#include "org/joda/time/MutableDateTime.h"
#include "org/joda/time/chrono/ISOChronology.h"
#include "org/joda/time/chrono/LenientChronology.h"
#include "org/joda/time/format/DateTimeFormatter.h"
#include "org/joda/time/format/ISODateTimeFormat.h"
#include "org/joda/time/tz/DateTimeZoneBuilder.h"
#include "org/joda/time/tz/ZoneInfoCompiler.h"
#include "org/joda/time/tz/ZoneInfoLogger.h"

@interface OrgJodaTimeTzZoneInfoCompiler () {
 @public
  id<JavaUtilMap> iRuleSets_;
  id<JavaUtilList> iZones_;
  id<JavaUtilList> iGoodLinks_;
  id<JavaUtilList> iBackLinks_;
}

+ (void)printUsage;

- (void)writeZoneWithJavaIoFile:(JavaIoFile *)outputDir
withOrgJodaTimeTzDateTimeZoneBuilder:(OrgJodaTimeTzDateTimeZoneBuilder *)builder
    withOrgJodaTimeDateTimeZone:(OrgJodaTimeDateTimeZone *)tz;

@end

J2OBJC_FIELD_SETTER(OrgJodaTimeTzZoneInfoCompiler, iRuleSets_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(OrgJodaTimeTzZoneInfoCompiler, iZones_, id<JavaUtilList>)
J2OBJC_FIELD_SETTER(OrgJodaTimeTzZoneInfoCompiler, iGoodLinks_, id<JavaUtilList>)
J2OBJC_FIELD_SETTER(OrgJodaTimeTzZoneInfoCompiler, iBackLinks_, id<JavaUtilList>)

__attribute__((unused)) static void OrgJodaTimeTzZoneInfoCompiler_printUsage();

__attribute__((unused)) static void OrgJodaTimeTzZoneInfoCompiler_writeZoneWithJavaIoFile_withOrgJodaTimeTzDateTimeZoneBuilder_withOrgJodaTimeDateTimeZone_(OrgJodaTimeTzZoneInfoCompiler *self, JavaIoFile *outputDir, OrgJodaTimeTzDateTimeZoneBuilder *builder, OrgJodaTimeDateTimeZone *tz);

@interface OrgJodaTimeTzZoneInfoCompiler_Rule : NSObject {
 @public
  NSString *iName_;
  jint iFromYear_;
  jint iToYear_;
  NSString *iType_;
  OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *iDateTimeOfYear_;
  jint iSaveMillis_;
  NSString *iLetterS_;
}

- (instancetype)initWithJavaUtilStringTokenizer:(JavaUtilStringTokenizer *)st;

- (void)addRecurringWithOrgJodaTimeTzDateTimeZoneBuilder:(OrgJodaTimeTzDateTimeZoneBuilder *)builder
                                            withNSString:(NSString *)nameFormat;

- (NSString *)formatNameWithNSString:(NSString *)nameFormat;

- (NSString *)description;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgJodaTimeTzZoneInfoCompiler_Rule)

J2OBJC_FIELD_SETTER(OrgJodaTimeTzZoneInfoCompiler_Rule, iName_, NSString *)
J2OBJC_FIELD_SETTER(OrgJodaTimeTzZoneInfoCompiler_Rule, iType_, NSString *)
J2OBJC_FIELD_SETTER(OrgJodaTimeTzZoneInfoCompiler_Rule, iDateTimeOfYear_, OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *)
J2OBJC_FIELD_SETTER(OrgJodaTimeTzZoneInfoCompiler_Rule, iLetterS_, NSString *)

__attribute__((unused)) static void OrgJodaTimeTzZoneInfoCompiler_Rule_initWithJavaUtilStringTokenizer_(OrgJodaTimeTzZoneInfoCompiler_Rule *self, JavaUtilStringTokenizer *st);

__attribute__((unused)) static OrgJodaTimeTzZoneInfoCompiler_Rule *new_OrgJodaTimeTzZoneInfoCompiler_Rule_initWithJavaUtilStringTokenizer_(JavaUtilStringTokenizer *st) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgJodaTimeTzZoneInfoCompiler_Rule *create_OrgJodaTimeTzZoneInfoCompiler_Rule_initWithJavaUtilStringTokenizer_(JavaUtilStringTokenizer *st);

__attribute__((unused)) static NSString *OrgJodaTimeTzZoneInfoCompiler_Rule_formatNameWithNSString_(OrgJodaTimeTzZoneInfoCompiler_Rule *self, NSString *nameFormat);

J2OBJC_TYPE_LITERAL_HEADER(OrgJodaTimeTzZoneInfoCompiler_Rule)

@interface OrgJodaTimeTzZoneInfoCompiler_RuleSet : NSObject {
 @public
  id<JavaUtilList> iRules_;
}

- (instancetype)initWithOrgJodaTimeTzZoneInfoCompiler_Rule:(OrgJodaTimeTzZoneInfoCompiler_Rule *)rule;

- (void)addRuleWithOrgJodaTimeTzZoneInfoCompiler_Rule:(OrgJodaTimeTzZoneInfoCompiler_Rule *)rule;

- (void)addRecurringWithOrgJodaTimeTzDateTimeZoneBuilder:(OrgJodaTimeTzDateTimeZoneBuilder *)builder
                                            withNSString:(NSString *)nameFormat;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgJodaTimeTzZoneInfoCompiler_RuleSet)

J2OBJC_FIELD_SETTER(OrgJodaTimeTzZoneInfoCompiler_RuleSet, iRules_, id<JavaUtilList>)

__attribute__((unused)) static void OrgJodaTimeTzZoneInfoCompiler_RuleSet_initWithOrgJodaTimeTzZoneInfoCompiler_Rule_(OrgJodaTimeTzZoneInfoCompiler_RuleSet *self, OrgJodaTimeTzZoneInfoCompiler_Rule *rule);

__attribute__((unused)) static OrgJodaTimeTzZoneInfoCompiler_RuleSet *new_OrgJodaTimeTzZoneInfoCompiler_RuleSet_initWithOrgJodaTimeTzZoneInfoCompiler_Rule_(OrgJodaTimeTzZoneInfoCompiler_Rule *rule) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgJodaTimeTzZoneInfoCompiler_RuleSet *create_OrgJodaTimeTzZoneInfoCompiler_RuleSet_initWithOrgJodaTimeTzZoneInfoCompiler_Rule_(OrgJodaTimeTzZoneInfoCompiler_Rule *rule);

J2OBJC_TYPE_LITERAL_HEADER(OrgJodaTimeTzZoneInfoCompiler_RuleSet)

@interface OrgJodaTimeTzZoneInfoCompiler_Zone : NSObject {
 @public
  NSString *iName_;
  jint iOffsetMillis_;
  NSString *iRules_;
  NSString *iFormat_;
  jint iUntilYear_;
  OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *iUntilDateTimeOfYear_;
  OrgJodaTimeTzZoneInfoCompiler_Zone *iNext_;
}

- (instancetype)initWithJavaUtilStringTokenizer:(JavaUtilStringTokenizer *)st;

- (instancetype)initWithNSString:(NSString *)name
     withJavaUtilStringTokenizer:(JavaUtilStringTokenizer *)st;

- (void)chainWithJavaUtilStringTokenizer:(JavaUtilStringTokenizer *)st;

- (void)addToBuilderWithOrgJodaTimeTzDateTimeZoneBuilder:(OrgJodaTimeTzDateTimeZoneBuilder *)builder
                                         withJavaUtilMap:(id<JavaUtilMap>)ruleSets;

+ (void)addToBuilderWithOrgJodaTimeTzZoneInfoCompiler_Zone:(OrgJodaTimeTzZoneInfoCompiler_Zone *)zone
                      withOrgJodaTimeTzDateTimeZoneBuilder:(OrgJodaTimeTzDateTimeZoneBuilder *)builder
                                           withJavaUtilMap:(id<JavaUtilMap>)ruleSets;

- (NSString *)description;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgJodaTimeTzZoneInfoCompiler_Zone)

J2OBJC_FIELD_SETTER(OrgJodaTimeTzZoneInfoCompiler_Zone, iName_, NSString *)
J2OBJC_FIELD_SETTER(OrgJodaTimeTzZoneInfoCompiler_Zone, iRules_, NSString *)
J2OBJC_FIELD_SETTER(OrgJodaTimeTzZoneInfoCompiler_Zone, iFormat_, NSString *)
J2OBJC_FIELD_SETTER(OrgJodaTimeTzZoneInfoCompiler_Zone, iUntilDateTimeOfYear_, OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *)
J2OBJC_FIELD_SETTER(OrgJodaTimeTzZoneInfoCompiler_Zone, iNext_, OrgJodaTimeTzZoneInfoCompiler_Zone *)

__attribute__((unused)) static void OrgJodaTimeTzZoneInfoCompiler_Zone_initWithJavaUtilStringTokenizer_(OrgJodaTimeTzZoneInfoCompiler_Zone *self, JavaUtilStringTokenizer *st);

__attribute__((unused)) static OrgJodaTimeTzZoneInfoCompiler_Zone *new_OrgJodaTimeTzZoneInfoCompiler_Zone_initWithJavaUtilStringTokenizer_(JavaUtilStringTokenizer *st) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgJodaTimeTzZoneInfoCompiler_Zone *create_OrgJodaTimeTzZoneInfoCompiler_Zone_initWithJavaUtilStringTokenizer_(JavaUtilStringTokenizer *st);

__attribute__((unused)) static void OrgJodaTimeTzZoneInfoCompiler_Zone_initWithNSString_withJavaUtilStringTokenizer_(OrgJodaTimeTzZoneInfoCompiler_Zone *self, NSString *name, JavaUtilStringTokenizer *st);

__attribute__((unused)) static OrgJodaTimeTzZoneInfoCompiler_Zone *new_OrgJodaTimeTzZoneInfoCompiler_Zone_initWithNSString_withJavaUtilStringTokenizer_(NSString *name, JavaUtilStringTokenizer *st) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgJodaTimeTzZoneInfoCompiler_Zone *create_OrgJodaTimeTzZoneInfoCompiler_Zone_initWithNSString_withJavaUtilStringTokenizer_(NSString *name, JavaUtilStringTokenizer *st);

__attribute__((unused)) static void OrgJodaTimeTzZoneInfoCompiler_Zone_addToBuilderWithOrgJodaTimeTzZoneInfoCompiler_Zone_withOrgJodaTimeTzDateTimeZoneBuilder_withJavaUtilMap_(OrgJodaTimeTzZoneInfoCompiler_Zone *zone, OrgJodaTimeTzDateTimeZoneBuilder *builder, id<JavaUtilMap> ruleSets);

J2OBJC_TYPE_LITERAL_HEADER(OrgJodaTimeTzZoneInfoCompiler_Zone)

OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *OrgJodaTimeTzZoneInfoCompiler_cStartOfYear;
OrgJodaTimeChronology *OrgJodaTimeTzZoneInfoCompiler_cLenientISO;

@implementation OrgJodaTimeTzZoneInfoCompiler

+ (void)mainWithNSStringArray:(IOSObjectArray *)args {
  OrgJodaTimeTzZoneInfoCompiler_mainWithNSStringArray_(args);
}

+ (void)printUsage {
  OrgJodaTimeTzZoneInfoCompiler_printUsage();
}

+ (OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *)getStartOfYear {
  return OrgJodaTimeTzZoneInfoCompiler_getStartOfYear();
}

+ (OrgJodaTimeChronology *)getLenientISOChronology {
  return OrgJodaTimeTzZoneInfoCompiler_getLenientISOChronology();
}

+ (void)writeZoneInfoMapWithJavaIoDataOutputStream:(JavaIoDataOutputStream *)dout
                                   withJavaUtilMap:(id<JavaUtilMap>)zimap {
  OrgJodaTimeTzZoneInfoCompiler_writeZoneInfoMapWithJavaIoDataOutputStream_withJavaUtilMap_(dout, zimap);
}

+ (jint)parseYearWithNSString:(NSString *)str
                      withInt:(jint)def {
  return OrgJodaTimeTzZoneInfoCompiler_parseYearWithNSString_withInt_(str, def);
}

+ (jint)parseMonthWithNSString:(NSString *)str {
  return OrgJodaTimeTzZoneInfoCompiler_parseMonthWithNSString_(str);
}

+ (jint)parseDayOfWeekWithNSString:(NSString *)str {
  return OrgJodaTimeTzZoneInfoCompiler_parseDayOfWeekWithNSString_(str);
}

+ (NSString *)parseOptionalWithNSString:(NSString *)str {
  return OrgJodaTimeTzZoneInfoCompiler_parseOptionalWithNSString_(str);
}

+ (jint)parseTimeWithNSString:(NSString *)str {
  return OrgJodaTimeTzZoneInfoCompiler_parseTimeWithNSString_(str);
}

+ (jchar)parseZoneCharWithChar:(jchar)c {
  return OrgJodaTimeTzZoneInfoCompiler_parseZoneCharWithChar_(c);
}

+ (jboolean)testWithNSString:(NSString *)id_
 withOrgJodaTimeDateTimeZone:(OrgJodaTimeDateTimeZone *)tz {
  return OrgJodaTimeTzZoneInfoCompiler_testWithNSString_withOrgJodaTimeDateTimeZone_(id_, tz);
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  OrgJodaTimeTzZoneInfoCompiler_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (id<JavaUtilMap>)compileWithJavaIoFile:(JavaIoFile *)outputDir
                     withJavaIoFileArray:(IOSObjectArray *)sources {
  if (sources != nil) {
    for (jint i = 0; i < sources->size_; i++) {
      JavaIoBufferedReader *in = create_JavaIoBufferedReader_initWithJavaIoReader_(create_JavaIoFileReader_initWithJavaIoFile_(IOSObjectArray_Get(sources, i)));
      [self parseDataFileWithJavaIoBufferedReader:in withBoolean:[@"backward" isEqual:[((JavaIoFile *) nil_chk(IOSObjectArray_Get(sources, i))) getName]]];
      [in close];
    }
  }
  if (outputDir != nil) {
    if (![outputDir exists] && ![outputDir mkdirs]) {
      @throw create_JavaIoIOException_initWithNSString_(JreStrcat("$@", @"Destination directory doesn't exist and cannot be created: ", outputDir));
    }
    if (![outputDir isDirectory]) {
      @throw create_JavaIoIOException_initWithNSString_(JreStrcat("$@", @"Destination is not a directory: ", outputDir));
    }
  }
  id<JavaUtilMap> map = create_JavaUtilTreeMap_init();
  id<JavaUtilMap> sourceMap = create_JavaUtilTreeMap_init();
  [((JavaIoPrintStream *) nil_chk(JreLoadStatic(JavaLangSystem, out))) printlnWithNSString:@"Writing zoneinfo files"];
  for (jint i = 0; i < [((id<JavaUtilList>) nil_chk(iZones_)) size]; i++) {
    OrgJodaTimeTzZoneInfoCompiler_Zone *zone = [iZones_ getWithInt:i];
    OrgJodaTimeTzDateTimeZoneBuilder *builder = create_OrgJodaTimeTzDateTimeZoneBuilder_init();
    [((OrgJodaTimeTzZoneInfoCompiler_Zone *) nil_chk(zone)) addToBuilderWithOrgJodaTimeTzDateTimeZoneBuilder:builder withJavaUtilMap:iRuleSets_];
    OrgJodaTimeDateTimeZone *tz = [builder toDateTimeZoneWithNSString:zone->iName_ withBoolean:true];
    if (OrgJodaTimeTzZoneInfoCompiler_testWithNSString_withOrgJodaTimeDateTimeZone_([((OrgJodaTimeDateTimeZone *) nil_chk(tz)) getID], tz)) {
      [map putWithId:[tz getID] withId:tz];
      [sourceMap putWithId:[tz getID] withId:zone];
      if (outputDir != nil) {
        OrgJodaTimeTzZoneInfoCompiler_writeZoneWithJavaIoFile_withOrgJodaTimeTzDateTimeZoneBuilder_withOrgJodaTimeDateTimeZone_(self, outputDir, builder, tz);
      }
    }
  }
  for (jint i = 0; i < [((id<JavaUtilList>) nil_chk(iGoodLinks_)) size]; i += 2) {
    NSString *baseId = [iGoodLinks_ getWithInt:i];
    NSString *alias = [iGoodLinks_ getWithInt:i + 1];
    OrgJodaTimeTzZoneInfoCompiler_Zone *sourceZone = [sourceMap getWithId:baseId];
    if (sourceZone == nil) {
      [JreLoadStatic(JavaLangSystem, out) printlnWithNSString:JreStrcat("$$$$$", @"Cannot find source zone '", baseId, @"' to link alias '", alias, @"' to")];
    }
    else {
      OrgJodaTimeTzDateTimeZoneBuilder *builder = create_OrgJodaTimeTzDateTimeZoneBuilder_init();
      [sourceZone addToBuilderWithOrgJodaTimeTzDateTimeZoneBuilder:builder withJavaUtilMap:iRuleSets_];
      OrgJodaTimeDateTimeZone *revived = [builder toDateTimeZoneWithNSString:alias withBoolean:true];
      if (OrgJodaTimeTzZoneInfoCompiler_testWithNSString_withOrgJodaTimeDateTimeZone_([((OrgJodaTimeDateTimeZone *) nil_chk(revived)) getID], revived)) {
        [map putWithId:[revived getID] withId:revived];
        if (outputDir != nil) {
          OrgJodaTimeTzZoneInfoCompiler_writeZoneWithJavaIoFile_withOrgJodaTimeTzDateTimeZoneBuilder_withOrgJodaTimeDateTimeZone_(self, outputDir, builder, revived);
        }
      }
      [map putWithId:[revived getID] withId:revived];
      if (OrgJodaTimeTzZoneInfoLogger_verbose()) {
        [JreLoadStatic(JavaLangSystem, out) printlnWithNSString:JreStrcat("$$$$$", @"Good link: ", alias, @" -> ", baseId, @" revived")];
      }
    }
  }
  for (jint pass = 0; pass < 2; pass++) {
    for (jint i = 0; i < [((id<JavaUtilList>) nil_chk(iBackLinks_)) size]; i += 2) {
      NSString *id_ = [iBackLinks_ getWithInt:i];
      NSString *alias = [iBackLinks_ getWithInt:i + 1];
      OrgJodaTimeDateTimeZone *tz = [map getWithId:id_];
      if (tz == nil) {
        if (pass > 0) {
          [JreLoadStatic(JavaLangSystem, out) printlnWithNSString:JreStrcat("$$$$$", @"Cannot find time zone '", id_, @"' to link alias '", alias, @"' to")];
        }
      }
      else {
        [map putWithId:alias withId:tz];
        if (OrgJodaTimeTzZoneInfoLogger_verbose()) {
          [JreLoadStatic(JavaLangSystem, out) printlnWithNSString:JreStrcat("$$$$", @"Back link: ", alias, @" -> ", [tz getID])];
        }
      }
    }
  }
  if (outputDir != nil) {
    [JreLoadStatic(JavaLangSystem, out) printlnWithNSString:@"Writing ZoneInfoMap"];
    JavaIoFile *file = create_JavaIoFile_initWithJavaIoFile_withNSString_(outputDir, @"ZoneInfoMap");
    if (![((JavaIoFile *) nil_chk([file getParentFile])) exists]) {
      [((JavaIoFile *) nil_chk([file getParentFile])) mkdirs];
    }
    JavaIoOutputStream *out = create_JavaIoFileOutputStream_initWithJavaIoFile_(file);
    JavaIoDataOutputStream *dout = create_JavaIoDataOutputStream_initWithJavaIoOutputStream_(out);
    @try {
      id<JavaUtilMap> zimap = create_JavaUtilTreeMap_initWithJavaUtilComparator_(JreLoadStatic(NSString, CASE_INSENSITIVE_ORDER));
      [zimap putAllWithJavaUtilMap:map];
      OrgJodaTimeTzZoneInfoCompiler_writeZoneInfoMapWithJavaIoDataOutputStream_withJavaUtilMap_(dout, zimap);
    }
    @finally {
      [dout close];
    }
  }
  return map;
}

- (void)writeZoneWithJavaIoFile:(JavaIoFile *)outputDir
withOrgJodaTimeTzDateTimeZoneBuilder:(OrgJodaTimeTzDateTimeZoneBuilder *)builder
    withOrgJodaTimeDateTimeZone:(OrgJodaTimeDateTimeZone *)tz {
  OrgJodaTimeTzZoneInfoCompiler_writeZoneWithJavaIoFile_withOrgJodaTimeTzDateTimeZoneBuilder_withOrgJodaTimeDateTimeZone_(self, outputDir, builder, tz);
}

- (void)parseDataFileWithJavaIoBufferedReader:(JavaIoBufferedReader *)inArg
                                  withBoolean:(jboolean)backward {
  OrgJodaTimeTzZoneInfoCompiler_Zone *zone = nil;
  NSString *line;
  while ((line = [((JavaIoBufferedReader *) nil_chk(inArg)) readLine]) != nil) {
    NSString *trimmed = [((NSString *) nil_chk(line)) trim];
    if (((jint) [((NSString *) nil_chk(trimmed)) length]) == 0 || [trimmed charAtWithInt:0] == '#') {
      continue;
    }
    jint index = [line indexOf:'#'];
    if (index >= 0) {
      line = [line substring:0 endIndex:index];
    }
    JavaUtilStringTokenizer *st = create_JavaUtilStringTokenizer_initWithNSString_withNSString_(line, @" \t");
    if (JavaLangCharacter_isWhitespaceWithChar_([((NSString *) nil_chk(line)) charAtWithInt:0]) && [st hasMoreTokens]) {
      if (zone != nil) {
        [zone chainWithJavaUtilStringTokenizer:st];
      }
      continue;
    }
    else {
      if (zone != nil) {
        [((id<JavaUtilList>) nil_chk(iZones_)) addWithId:zone];
      }
      zone = nil;
    }
    if ([st hasMoreTokens]) {
      NSString *token = [st nextToken];
      if ([((NSString *) nil_chk(token)) equalsIgnoreCase:@"Rule"]) {
        OrgJodaTimeTzZoneInfoCompiler_Rule *r = create_OrgJodaTimeTzZoneInfoCompiler_Rule_initWithJavaUtilStringTokenizer_(st);
        OrgJodaTimeTzZoneInfoCompiler_RuleSet *rs = [((id<JavaUtilMap>) nil_chk(iRuleSets_)) getWithId:r->iName_];
        if (rs == nil) {
          rs = create_OrgJodaTimeTzZoneInfoCompiler_RuleSet_initWithOrgJodaTimeTzZoneInfoCompiler_Rule_(r);
          [iRuleSets_ putWithId:r->iName_ withId:rs];
        }
        else {
          [rs addRuleWithOrgJodaTimeTzZoneInfoCompiler_Rule:r];
        }
      }
      else if ([token equalsIgnoreCase:@"Zone"]) {
        if ([st countTokens] < 4) {
          @throw create_JavaLangIllegalArgumentException_initWithNSString_(@"Attempting to create a Zone from an incomplete tokenizer");
        }
        zone = create_OrgJodaTimeTzZoneInfoCompiler_Zone_initWithJavaUtilStringTokenizer_(st);
      }
      else if ([token equalsIgnoreCase:@"Link"]) {
        NSString *real = [st nextToken];
        NSString *alias = [st nextToken];
        if (backward || [((NSString *) nil_chk(alias)) isEqual:@"US/Pacific-New"] || [alias hasPrefix:@"Etc/"] || [alias isEqual:@"GMT"]) {
          [((id<JavaUtilList>) nil_chk(iBackLinks_)) addWithId:real];
          [iBackLinks_ addWithId:alias];
        }
        else {
          [((id<JavaUtilList>) nil_chk(iGoodLinks_)) addWithId:real];
          [iGoodLinks_ addWithId:alias];
        }
      }
      else {
        [((JavaIoPrintStream *) nil_chk(JreLoadStatic(JavaLangSystem, out))) printlnWithNSString:JreStrcat("$$", @"Unknown line: ", line)];
      }
    }
  }
  if (zone != nil) {
    [((id<JavaUtilList>) nil_chk(iZones_)) addWithId:zone];
  }
}

- (void)dealloc {
  RELEASE_(iRuleSets_);
  RELEASE_(iZones_);
  RELEASE_(iGoodLinks_);
  RELEASE_(iBackLinks_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "mainWithNSStringArray:", "main", "V", 0x9, "Ljava.lang.Exception;", NULL },
    { "printUsage", NULL, "V", 0xa, NULL, NULL },
    { "getStartOfYear", NULL, "Lorg.joda.time.tz.ZoneInfoCompiler$DateTimeOfYear;", 0x8, NULL, NULL },
    { "getLenientISOChronology", NULL, "Lorg.joda.time.Chronology;", 0x8, NULL, NULL },
    { "writeZoneInfoMapWithJavaIoDataOutputStream:withJavaUtilMap:", "writeZoneInfoMap", "V", 0x8, "Ljava.io.IOException;", "(Ljava/io/DataOutputStream;Ljava/util/Map<Ljava/lang/String;Lorg/joda/time/DateTimeZone;>;)V" },
    { "parseYearWithNSString:withInt:", "parseYear", "I", 0x8, NULL, NULL },
    { "parseMonthWithNSString:", "parseMonth", "I", 0x8, NULL, NULL },
    { "parseDayOfWeekWithNSString:", "parseDayOfWeek", "I", 0x8, NULL, NULL },
    { "parseOptionalWithNSString:", "parseOptional", "Ljava.lang.String;", 0x8, NULL, NULL },
    { "parseTimeWithNSString:", "parseTime", "I", 0x8, NULL, NULL },
    { "parseZoneCharWithChar:", "parseZoneChar", "C", 0x8, NULL, NULL },
    { "testWithNSString:withOrgJodaTimeDateTimeZone:", "test", "Z", 0x8, NULL, NULL },
    { "init", "ZoneInfoCompiler", NULL, 0x1, NULL, NULL },
    { "compileWithJavaIoFile:withJavaIoFileArray:", "compile", "Ljava.util.Map;", 0x1, "Ljava.io.IOException;", "(Ljava/io/File;[Ljava/io/File;)Ljava/util/Map<Ljava/lang/String;Lorg/joda/time/DateTimeZone;>;" },
    { "writeZoneWithJavaIoFile:withOrgJodaTimeTzDateTimeZoneBuilder:withOrgJodaTimeDateTimeZone:", "writeZone", "V", 0x2, "Ljava.io.IOException;", NULL },
    { "parseDataFileWithJavaIoBufferedReader:withBoolean:", "parseDataFile", "V", 0x1, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "cStartOfYear", "cStartOfYear", 0x8, "Lorg.joda.time.tz.ZoneInfoCompiler$DateTimeOfYear;", &OrgJodaTimeTzZoneInfoCompiler_cStartOfYear, NULL, .constantValue.asLong = 0 },
    { "cLenientISO", "cLenientISO", 0x8, "Lorg.joda.time.Chronology;", &OrgJodaTimeTzZoneInfoCompiler_cLenientISO, NULL, .constantValue.asLong = 0 },
    { "iRuleSets_", NULL, 0x2, "Ljava.util.Map;", NULL, "Ljava/util/Map<Ljava/lang/String;Lorg/joda/time/tz/ZoneInfoCompiler$RuleSet;>;", .constantValue.asLong = 0 },
    { "iZones_", NULL, 0x2, "Ljava.util.List;", NULL, "Ljava/util/List<Lorg/joda/time/tz/ZoneInfoCompiler$Zone;>;", .constantValue.asLong = 0 },
    { "iGoodLinks_", NULL, 0x2, "Ljava.util.List;", NULL, "Ljava/util/List<Ljava/lang/String;>;", .constantValue.asLong = 0 },
    { "iBackLinks_", NULL, 0x2, "Ljava.util.List;", NULL, "Ljava/util/List<Ljava/lang/String;>;", .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Lorg.joda.time.tz.ZoneInfoCompiler$DateTimeOfYear;", "Lorg.joda.time.tz.ZoneInfoCompiler$Rule;", "Lorg.joda.time.tz.ZoneInfoCompiler$RuleSet;", "Lorg.joda.time.tz.ZoneInfoCompiler$Zone;"};
  static const J2ObjcClassInfo _OrgJodaTimeTzZoneInfoCompiler = { 2, "ZoneInfoCompiler", "org.joda.time.tz", NULL, 0x1, 16, methods, 6, fields, 0, NULL, 4, inner_classes, NULL, NULL };
  return &_OrgJodaTimeTzZoneInfoCompiler;
}

@end

void OrgJodaTimeTzZoneInfoCompiler_mainWithNSStringArray_(IOSObjectArray *args) {
  OrgJodaTimeTzZoneInfoCompiler_initialize();
  if (((IOSObjectArray *) nil_chk(args))->size_ == 0) {
    OrgJodaTimeTzZoneInfoCompiler_printUsage();
    return;
  }
  JavaIoFile *inputDir = nil;
  JavaIoFile *outputDir = nil;
  jboolean verbose = false;
  jint i;
  for (i = 0; i < args->size_; i++) {
    @try {
      if ([@"-src" isEqual:IOSObjectArray_Get(args, i)]) {
        inputDir = create_JavaIoFile_initWithNSString_(IOSObjectArray_Get(args, ++i));
      }
      else if ([@"-dst" isEqual:IOSObjectArray_Get(args, i)]) {
        outputDir = create_JavaIoFile_initWithNSString_(IOSObjectArray_Get(args, ++i));
      }
      else if ([@"-verbose" isEqual:IOSObjectArray_Get(args, i)]) {
        verbose = true;
      }
      else if ([@"-?" isEqual:IOSObjectArray_Get(args, i)]) {
        OrgJodaTimeTzZoneInfoCompiler_printUsage();
        return;
      }
      else {
        break;
      }
    }
    @catch (JavaLangIndexOutOfBoundsException *e) {
      OrgJodaTimeTzZoneInfoCompiler_printUsage();
      return;
    }
  }
  if (i >= args->size_) {
    OrgJodaTimeTzZoneInfoCompiler_printUsage();
    return;
  }
  IOSObjectArray *sources = [IOSObjectArray arrayWithLength:args->size_ - i type:JavaIoFile_class_()];
  for (jint j = 0; i < args->size_; i++, j++) {
    IOSObjectArray_Set(sources, j, inputDir == nil ? create_JavaIoFile_initWithNSString_(IOSObjectArray_Get(args, i)) : create_JavaIoFile_initWithJavaIoFile_withNSString_(inputDir, IOSObjectArray_Get(args, i)));
  }
  OrgJodaTimeTzZoneInfoLogger_setWithBoolean_(verbose);
  OrgJodaTimeTzZoneInfoCompiler *zic = create_OrgJodaTimeTzZoneInfoCompiler_init();
  [zic compileWithJavaIoFile:outputDir withJavaIoFileArray:sources];
}

void OrgJodaTimeTzZoneInfoCompiler_printUsage() {
  OrgJodaTimeTzZoneInfoCompiler_initialize();
  [((JavaIoPrintStream *) nil_chk(JreLoadStatic(JavaLangSystem, out))) printlnWithNSString:@"Usage: java org.joda.time.tz.ZoneInfoCompiler <options> <source files>"];
  [JreLoadStatic(JavaLangSystem, out) printlnWithNSString:@"where possible options include:"];
  [JreLoadStatic(JavaLangSystem, out) printlnWithNSString:@"  -src <directory>    Specify where to read source files"];
  [JreLoadStatic(JavaLangSystem, out) printlnWithNSString:@"  -dst <directory>    Specify where to write generated files"];
  [JreLoadStatic(JavaLangSystem, out) printlnWithNSString:@"  -verbose            Output verbosely (default false)"];
}

OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *OrgJodaTimeTzZoneInfoCompiler_getStartOfYear() {
  OrgJodaTimeTzZoneInfoCompiler_initialize();
  if (OrgJodaTimeTzZoneInfoCompiler_cStartOfYear == nil) {
    JreStrongAssignAndConsume(&OrgJodaTimeTzZoneInfoCompiler_cStartOfYear, new_OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear_init());
  }
  return OrgJodaTimeTzZoneInfoCompiler_cStartOfYear;
}

OrgJodaTimeChronology *OrgJodaTimeTzZoneInfoCompiler_getLenientISOChronology() {
  OrgJodaTimeTzZoneInfoCompiler_initialize();
  if (OrgJodaTimeTzZoneInfoCompiler_cLenientISO == nil) {
    JreStrongAssign(&OrgJodaTimeTzZoneInfoCompiler_cLenientISO, OrgJodaTimeChronoLenientChronology_getInstanceWithOrgJodaTimeChronology_(OrgJodaTimeChronoISOChronology_getInstanceUTC()));
  }
  return OrgJodaTimeTzZoneInfoCompiler_cLenientISO;
}

void OrgJodaTimeTzZoneInfoCompiler_writeZoneInfoMapWithJavaIoDataOutputStream_withJavaUtilMap_(JavaIoDataOutputStream *dout, id<JavaUtilMap> zimap) {
  OrgJodaTimeTzZoneInfoCompiler_initialize();
  id<JavaUtilMap> idToIndex = create_JavaUtilHashMap_initWithInt_([((id<JavaUtilMap>) nil_chk(zimap)) size]);
  JavaUtilTreeMap *indexToId = create_JavaUtilTreeMap_init();
  jshort count = 0;
  for (id<JavaUtilMap_Entry> __strong entry_ in nil_chk([zimap entrySet])) {
    NSString *id_ = [((id<JavaUtilMap_Entry>) nil_chk(entry_)) getKey];
    if (![idToIndex containsKeyWithId:id_]) {
      JavaLangShort *index = JavaLangShort_valueOfWithShort_(count);
      [idToIndex putWithId:id_ withId:index];
      [indexToId putWithId:index withId:id_];
      if (++count == 0) {
        @throw create_JavaLangInternalError_initWithNSString_(@"Too many time zone ids");
      }
    }
    id_ = [((OrgJodaTimeDateTimeZone *) nil_chk(([entry_ getValue]))) getID];
    if (![idToIndex containsKeyWithId:id_]) {
      JavaLangShort *index = JavaLangShort_valueOfWithShort_(count);
      [idToIndex putWithId:id_ withId:index];
      [indexToId putWithId:index withId:id_];
      if (++count == 0) {
        @throw create_JavaLangInternalError_initWithNSString_(@"Too many time zone ids");
      }
    }
  }
  [((JavaIoDataOutputStream *) nil_chk(dout)) writeShortWithInt:[indexToId size]];
  for (NSString * __strong id_ in nil_chk([indexToId values])) {
    [dout writeUTFWithNSString:id_];
  }
  [dout writeShortWithInt:[zimap size]];
  for (id<JavaUtilMap_Entry> __strong entry_ in nil_chk([zimap entrySet])) {
    NSString *id_ = [((id<JavaUtilMap_Entry>) nil_chk(entry_)) getKey];
    [dout writeShortWithInt:[((JavaLangShort *) nil_chk([idToIndex getWithId:id_])) shortValue]];
    id_ = [((OrgJodaTimeDateTimeZone *) nil_chk([entry_ getValue])) getID];
    [dout writeShortWithInt:[((JavaLangShort *) nil_chk([idToIndex getWithId:id_])) shortValue]];
  }
}

jint OrgJodaTimeTzZoneInfoCompiler_parseYearWithNSString_withInt_(NSString *str, jint def) {
  OrgJodaTimeTzZoneInfoCompiler_initialize();
  str = [((NSString *) nil_chk(str)) lowercaseString];
  if ([((NSString *) nil_chk(str)) isEqual:@"minimum"] || [str isEqual:@"min"]) {
    return JavaLangInteger_MIN_VALUE;
  }
  else if ([str isEqual:@"maximum"] || [str isEqual:@"max"]) {
    return JavaLangInteger_MAX_VALUE;
  }
  else if ([str isEqual:@"only"]) {
    return def;
  }
  return JavaLangInteger_parseIntWithNSString_(str);
}

jint OrgJodaTimeTzZoneInfoCompiler_parseMonthWithNSString_(NSString *str) {
  OrgJodaTimeTzZoneInfoCompiler_initialize();
  OrgJodaTimeDateTimeField *field = [((OrgJodaTimeChronoISOChronology *) nil_chk(OrgJodaTimeChronoISOChronology_getInstanceUTC())) monthOfYear];
  return [field getWithLong:[((OrgJodaTimeDateTimeField *) nil_chk(field)) setWithLong:0 withNSString:str withJavaUtilLocale:JreLoadStatic(JavaUtilLocale, ENGLISH)]];
}

jint OrgJodaTimeTzZoneInfoCompiler_parseDayOfWeekWithNSString_(NSString *str) {
  OrgJodaTimeTzZoneInfoCompiler_initialize();
  OrgJodaTimeDateTimeField *field = [((OrgJodaTimeChronoISOChronology *) nil_chk(OrgJodaTimeChronoISOChronology_getInstanceUTC())) dayOfWeek];
  return [field getWithLong:[((OrgJodaTimeDateTimeField *) nil_chk(field)) setWithLong:0 withNSString:str withJavaUtilLocale:JreLoadStatic(JavaUtilLocale, ENGLISH)]];
}

NSString *OrgJodaTimeTzZoneInfoCompiler_parseOptionalWithNSString_(NSString *str) {
  OrgJodaTimeTzZoneInfoCompiler_initialize();
  return ([((NSString *) nil_chk(str)) isEqual:@"-"]) ? nil : str;
}

jint OrgJodaTimeTzZoneInfoCompiler_parseTimeWithNSString_(NSString *str) {
  OrgJodaTimeTzZoneInfoCompiler_initialize();
  OrgJodaTimeFormatDateTimeFormatter *p = OrgJodaTimeFormatISODateTimeFormat_hourMinuteSecondFraction();
  OrgJodaTimeMutableDateTime *mdt = create_OrgJodaTimeMutableDateTime_initWithLong_withOrgJodaTimeChronology_(0, OrgJodaTimeTzZoneInfoCompiler_getLenientISOChronology());
  jint pos = 0;
  if ([((NSString *) nil_chk(str)) hasPrefix:@"-"]) {
    pos = 1;
  }
  jint newPos = [((OrgJodaTimeFormatDateTimeFormatter *) nil_chk(p)) parseIntoWithOrgJodaTimeReadWritableInstant:mdt withNSString:str withInt:pos];
  if (newPos == ~pos) {
    @throw create_JavaLangIllegalArgumentException_initWithNSString_(str);
  }
  jint millis = (jint) [mdt getMillis];
  if (pos == 1) {
    millis = -millis;
  }
  return millis;
}

jchar OrgJodaTimeTzZoneInfoCompiler_parseZoneCharWithChar_(jchar c) {
  OrgJodaTimeTzZoneInfoCompiler_initialize();
  switch (c) {
    case 's':
    case 'S':
    return 's';
    case 'u':
    case 'U':
    case 'g':
    case 'G':
    case 'z':
    case 'Z':
    return 'u';
    case 'w':
    case 'W':
    default:
    return 'w';
  }
}

jboolean OrgJodaTimeTzZoneInfoCompiler_testWithNSString_withOrgJodaTimeDateTimeZone_(NSString *id_, OrgJodaTimeDateTimeZone *tz) {
  OrgJodaTimeTzZoneInfoCompiler_initialize();
  if (![((NSString *) nil_chk(id_)) isEqual:[((OrgJodaTimeDateTimeZone *) nil_chk(tz)) getID]]) {
    return true;
  }
  jlong millis = [((OrgJodaTimeDateTimeField *) nil_chk([((OrgJodaTimeChronoISOChronology *) nil_chk(OrgJodaTimeChronoISOChronology_getInstanceUTC())) year])) setWithLong:0 withInt:1850];
  jlong end = [((OrgJodaTimeDateTimeField *) nil_chk([((OrgJodaTimeChronoISOChronology *) nil_chk(OrgJodaTimeChronoISOChronology_getInstanceUTC())) year])) setWithLong:0 withInt:2050];
  jint offset = [tz getOffsetWithLong:millis];
  NSString *key = [tz getNameKeyWithLong:millis];
  id<JavaUtilList> transitions = create_JavaUtilArrayList_init();
  while (true) {
    jlong next = [tz nextTransitionWithLong:millis];
    if (next == millis || next > end) {
      break;
    }
    millis = next;
    jint nextOffset = [tz getOffsetWithLong:millis];
    NSString *nextKey = [tz getNameKeyWithLong:millis];
    if (offset == nextOffset && [((NSString *) nil_chk(key)) isEqual:nextKey]) {
      [((JavaIoPrintStream *) nil_chk(JreLoadStatic(JavaLangSystem, out))) printlnWithNSString:JreStrcat("$$C@", @"*d* Error in ", [tz getID], ' ', create_OrgJodaTimeDateTime_initWithLong_withOrgJodaTimeChronology_(millis, OrgJodaTimeChronoISOChronology_getInstanceUTC()))];
      return false;
    }
    if (nextKey == nil || (((jint) [nextKey length]) < 3 && ![@"??" isEqual:nextKey])) {
      [((JavaIoPrintStream *) nil_chk(JreLoadStatic(JavaLangSystem, out))) printlnWithNSString:JreStrcat("$$C@$$", @"*s* Error in ", [tz getID], ' ', create_OrgJodaTimeDateTime_initWithLong_withOrgJodaTimeChronology_(millis, OrgJodaTimeChronoISOChronology_getInstanceUTC()), @", nameKey=", nextKey)];
      return false;
    }
    [transitions addWithId:JavaLangLong_valueOfWithLong_(millis)];
    offset = nextOffset;
    key = nextKey;
  }
  millis = [((OrgJodaTimeDateTimeField *) nil_chk([((OrgJodaTimeChronoISOChronology *) nil_chk(OrgJodaTimeChronoISOChronology_getInstanceUTC())) year])) setWithLong:0 withInt:2050];
  end = [((OrgJodaTimeDateTimeField *) nil_chk([((OrgJodaTimeChronoISOChronology *) nil_chk(OrgJodaTimeChronoISOChronology_getInstanceUTC())) year])) setWithLong:0 withInt:1850];
  for (jint i = [transitions size]; --i >= 0; ) {
    jlong prev = [tz previousTransitionWithLong:millis];
    if (prev == millis || prev < end) {
      break;
    }
    millis = prev;
    jlong trans = [((JavaLangLong *) nil_chk([transitions getWithInt:i])) longLongValue];
    if (trans - 1 != millis) {
      [((JavaIoPrintStream *) nil_chk(JreLoadStatic(JavaLangSystem, out))) printlnWithNSString:JreStrcat("$$C@$@", @"*r* Error in ", [tz getID], ' ', create_OrgJodaTimeDateTime_initWithLong_withOrgJodaTimeChronology_(millis, OrgJodaTimeChronoISOChronology_getInstanceUTC()), @" != ", create_OrgJodaTimeDateTime_initWithLong_withOrgJodaTimeChronology_(trans - 1, OrgJodaTimeChronoISOChronology_getInstanceUTC()))];
      return false;
    }
  }
  return true;
}

void OrgJodaTimeTzZoneInfoCompiler_init(OrgJodaTimeTzZoneInfoCompiler *self) {
  NSObject_init(self);
  JreStrongAssignAndConsume(&self->iRuleSets_, new_JavaUtilHashMap_init());
  JreStrongAssignAndConsume(&self->iZones_, new_JavaUtilArrayList_init());
  JreStrongAssignAndConsume(&self->iGoodLinks_, new_JavaUtilArrayList_init());
  JreStrongAssignAndConsume(&self->iBackLinks_, new_JavaUtilArrayList_init());
}

OrgJodaTimeTzZoneInfoCompiler *new_OrgJodaTimeTzZoneInfoCompiler_init() {
  OrgJodaTimeTzZoneInfoCompiler *self = [OrgJodaTimeTzZoneInfoCompiler alloc];
  OrgJodaTimeTzZoneInfoCompiler_init(self);
  return self;
}

OrgJodaTimeTzZoneInfoCompiler *create_OrgJodaTimeTzZoneInfoCompiler_init() {
  OrgJodaTimeTzZoneInfoCompiler *self = [[OrgJodaTimeTzZoneInfoCompiler alloc] autorelease];
  OrgJodaTimeTzZoneInfoCompiler_init(self);
  return self;
}

void OrgJodaTimeTzZoneInfoCompiler_writeZoneWithJavaIoFile_withOrgJodaTimeTzDateTimeZoneBuilder_withOrgJodaTimeDateTimeZone_(OrgJodaTimeTzZoneInfoCompiler *self, JavaIoFile *outputDir, OrgJodaTimeTzDateTimeZoneBuilder *builder, OrgJodaTimeDateTimeZone *tz) {
  if (OrgJodaTimeTzZoneInfoLogger_verbose()) {
    [((JavaIoPrintStream *) nil_chk(JreLoadStatic(JavaLangSystem, out))) printlnWithNSString:JreStrcat("$$", @"Writing ", [((OrgJodaTimeDateTimeZone *) nil_chk(tz)) getID])];
  }
  JavaIoFile *file = create_JavaIoFile_initWithJavaIoFile_withNSString_(outputDir, [((OrgJodaTimeDateTimeZone *) nil_chk(tz)) getID]);
  if (![((JavaIoFile *) nil_chk([file getParentFile])) exists]) {
    [((JavaIoFile *) nil_chk([file getParentFile])) mkdirs];
  }
  JavaIoOutputStream *out = create_JavaIoFileOutputStream_initWithJavaIoFile_(file);
  @try {
    [((OrgJodaTimeTzDateTimeZoneBuilder *) nil_chk(builder)) writeToWithNSString:[tz getID] withJavaIoOutputStream:out];
  }
  @finally {
    [out close];
  }
  JavaIoInputStream *in = create_JavaIoFileInputStream_initWithJavaIoFile_(file);
  OrgJodaTimeDateTimeZone *tz2 = OrgJodaTimeTzDateTimeZoneBuilder_readFromWithJavaIoInputStream_withNSString_(in, [tz getID]);
  [in close];
  if (![tz isEqual:tz2]) {
    [((JavaIoPrintStream *) nil_chk(JreLoadStatic(JavaLangSystem, out))) printlnWithNSString:JreStrcat("$$$", @"*e* Error in ", [tz getID], @": Didn't read properly from file")];
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgJodaTimeTzZoneInfoCompiler)

@implementation OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (instancetype)initWithJavaUtilStringTokenizer:(JavaUtilStringTokenizer *)st {
  OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear_initWithJavaUtilStringTokenizer_(self, st);
  return self;
}

- (void)addRecurringWithOrgJodaTimeTzDateTimeZoneBuilder:(OrgJodaTimeTzDateTimeZoneBuilder *)builder
                                            withNSString:(NSString *)nameKey
                                                 withInt:(jint)saveMillis
                                                 withInt:(jint)fromYear
                                                 withInt:(jint)toYear {
  [((OrgJodaTimeTzDateTimeZoneBuilder *) nil_chk(builder)) addRecurringSavingsWithNSString:nameKey withInt:saveMillis withInt:fromYear withInt:toYear withChar:iZoneChar_ withInt:iMonthOfYear_ withInt:iDayOfMonth_ withInt:iDayOfWeek_ withBoolean:iAdvanceDayOfWeek_ withInt:iMillisOfDay_];
}

- (void)addCutoverWithOrgJodaTimeTzDateTimeZoneBuilder:(OrgJodaTimeTzDateTimeZoneBuilder *)builder
                                               withInt:(jint)year {
  [((OrgJodaTimeTzDateTimeZoneBuilder *) nil_chk(builder)) addCutoverWithInt:year withChar:iZoneChar_ withInt:iMonthOfYear_ withInt:iDayOfMonth_ withInt:iDayOfWeek_ withBoolean:iAdvanceDayOfWeek_ withInt:iMillisOfDay_];
}

- (NSString *)description {
  return JreStrcat("$I$I$I$Z$I$CC", @"MonthOfYear: ", iMonthOfYear_, @"\nDayOfMonth: ", iDayOfMonth_, @"\nDayOfWeek: ", iDayOfWeek_, @"\nAdvanceDayOfWeek: ", iAdvanceDayOfWeek_, @"\nMillisOfDay: ", iMillisOfDay_, @"\nZoneChar: ", iZoneChar_, 0x000a);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "DateTimeOfYear", NULL, 0x0, NULL, NULL },
    { "initWithJavaUtilStringTokenizer:", "DateTimeOfYear", NULL, 0x0, NULL, NULL },
    { "addRecurringWithOrgJodaTimeTzDateTimeZoneBuilder:withNSString:withInt:withInt:withInt:", "addRecurring", "V", 0x1, NULL, NULL },
    { "addCutoverWithOrgJodaTimeTzDateTimeZoneBuilder:withInt:", "addCutover", "V", 0x1, NULL, NULL },
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "iMonthOfYear_", NULL, 0x11, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "iDayOfMonth_", NULL, 0x11, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "iDayOfWeek_", NULL, 0x11, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "iAdvanceDayOfWeek_", NULL, 0x11, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "iMillisOfDay_", NULL, 0x11, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "iZoneChar_", NULL, 0x11, "C", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear = { 2, "DateTimeOfYear", "org.joda.time.tz", "ZoneInfoCompiler", 0x8, 5, methods, 6, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear;
}

@end

void OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear_init(OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *self) {
  NSObject_init(self);
  self->iMonthOfYear_ = 1;
  self->iDayOfMonth_ = 1;
  self->iDayOfWeek_ = 0;
  self->iAdvanceDayOfWeek_ = false;
  self->iMillisOfDay_ = 0;
  self->iZoneChar_ = 'w';
}

OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *new_OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear_init() {
  OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *self = [OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear alloc];
  OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear_init(self);
  return self;
}

OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *create_OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear_init() {
  OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *self = [[OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear alloc] autorelease];
  OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear_init(self);
  return self;
}

void OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear_initWithJavaUtilStringTokenizer_(OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *self, JavaUtilStringTokenizer *st) {
  NSObject_init(self);
  jint month = 1;
  jint day = 1;
  jint dayOfWeek = 0;
  jint millis = 0;
  jboolean advance = false;
  jchar zoneChar = 'w';
  if ([((JavaUtilStringTokenizer *) nil_chk(st)) hasMoreTokens]) {
    month = OrgJodaTimeTzZoneInfoCompiler_parseMonthWithNSString_([st nextToken]);
    if ([st hasMoreTokens]) {
      NSString *str = [st nextToken];
      if ([((NSString *) nil_chk(str)) hasPrefix:@"last"]) {
        day = -1;
        dayOfWeek = OrgJodaTimeTzZoneInfoCompiler_parseDayOfWeekWithNSString_([str substring:4]);
        advance = false;
      }
      else {
        @try {
          day = JavaLangInteger_parseIntWithNSString_(str);
          dayOfWeek = 0;
          advance = false;
        }
        @catch (JavaLangNumberFormatException *e) {
          jint index = [str indexOfString:@">="];
          if (index > 0) {
            day = JavaLangInteger_parseIntWithNSString_([str substring:index + 2]);
            dayOfWeek = OrgJodaTimeTzZoneInfoCompiler_parseDayOfWeekWithNSString_([str substring:0 endIndex:index]);
            advance = true;
          }
          else {
            index = [str indexOfString:@"<="];
            if (index > 0) {
              day = JavaLangInteger_parseIntWithNSString_([str substring:index + 2]);
              dayOfWeek = OrgJodaTimeTzZoneInfoCompiler_parseDayOfWeekWithNSString_([str substring:0 endIndex:index]);
              advance = false;
            }
            else {
              @throw create_JavaLangIllegalArgumentException_initWithNSString_(str);
            }
          }
        }
      }
      if ([st hasMoreTokens]) {
        str = [st nextToken];
        zoneChar = OrgJodaTimeTzZoneInfoCompiler_parseZoneCharWithChar_([str charAtWithInt:((jint) [((NSString *) nil_chk(str)) length]) - 1]);
        if ([str isEqual:@"24:00"]) {
          if (month == 12 && day == 31) {
            millis = OrgJodaTimeTzZoneInfoCompiler_parseTimeWithNSString_(@"23:59:59.999");
          }
          else {
            OrgJodaTimeLocalDate *date = (day == -1 ? [create_OrgJodaTimeLocalDate_initWithInt_withInt_withInt_(2001, month, 1) plusMonthsWithInt:1] : [create_OrgJodaTimeLocalDate_initWithInt_withInt_withInt_(2001, month, day) plusDaysWithInt:1]);
            advance = (day != -1 && dayOfWeek != 0);
            month = [date getMonthOfYear];
            day = [date getDayOfMonth];
            if (dayOfWeek != 0) {
              dayOfWeek = ((dayOfWeek - 1 + 1) % 7) + 1;
            }
          }
        }
        else {
          millis = OrgJodaTimeTzZoneInfoCompiler_parseTimeWithNSString_(str);
        }
      }
    }
  }
  self->iMonthOfYear_ = month;
  self->iDayOfMonth_ = day;
  self->iDayOfWeek_ = dayOfWeek;
  self->iAdvanceDayOfWeek_ = advance;
  self->iMillisOfDay_ = millis;
  self->iZoneChar_ = zoneChar;
}

OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *new_OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear_initWithJavaUtilStringTokenizer_(JavaUtilStringTokenizer *st) {
  OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *self = [OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear alloc];
  OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear_initWithJavaUtilStringTokenizer_(self, st);
  return self;
}

OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *create_OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear_initWithJavaUtilStringTokenizer_(JavaUtilStringTokenizer *st) {
  OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *self = [[OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear alloc] autorelease];
  OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear_initWithJavaUtilStringTokenizer_(self, st);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear)

@implementation OrgJodaTimeTzZoneInfoCompiler_Rule

- (instancetype)initWithJavaUtilStringTokenizer:(JavaUtilStringTokenizer *)st {
  OrgJodaTimeTzZoneInfoCompiler_Rule_initWithJavaUtilStringTokenizer_(self, st);
  return self;
}

- (void)addRecurringWithOrgJodaTimeTzDateTimeZoneBuilder:(OrgJodaTimeTzDateTimeZoneBuilder *)builder
                                            withNSString:(NSString *)nameFormat {
  NSString *nameKey = OrgJodaTimeTzZoneInfoCompiler_Rule_formatNameWithNSString_(self, nameFormat);
  [((OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *) nil_chk(iDateTimeOfYear_)) addRecurringWithOrgJodaTimeTzDateTimeZoneBuilder:builder withNSString:nameKey withInt:iSaveMillis_ withInt:iFromYear_ withInt:iToYear_];
}

- (NSString *)formatNameWithNSString:(NSString *)nameFormat {
  return OrgJodaTimeTzZoneInfoCompiler_Rule_formatNameWithNSString_(self, nameFormat);
}

- (NSString *)description {
  return JreStrcat("$$$I$I$$C@$I$$C", @"[Rule]\nName: ", iName_, @"\nFromYear: ", iFromYear_, @"\nToYear: ", iToYear_, @"\nType: ", iType_, 0x000a, iDateTimeOfYear_, @"SaveMillis: ", iSaveMillis_, @"\nLetterS: ", iLetterS_, 0x000a);
}

- (void)dealloc {
  RELEASE_(iName_);
  RELEASE_(iType_);
  RELEASE_(iDateTimeOfYear_);
  RELEASE_(iLetterS_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithJavaUtilStringTokenizer:", "Rule", NULL, 0x0, NULL, NULL },
    { "addRecurringWithOrgJodaTimeTzDateTimeZoneBuilder:withNSString:", "addRecurring", "V", 0x1, NULL, NULL },
    { "formatNameWithNSString:", "formatName", "Ljava.lang.String;", 0x2, NULL, NULL },
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "iName_", NULL, 0x11, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
    { "iFromYear_", NULL, 0x11, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "iToYear_", NULL, 0x11, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "iType_", NULL, 0x11, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
    { "iDateTimeOfYear_", NULL, 0x11, "Lorg.joda.time.tz.ZoneInfoCompiler$DateTimeOfYear;", NULL, NULL, .constantValue.asLong = 0 },
    { "iSaveMillis_", NULL, 0x11, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "iLetterS_", NULL, 0x11, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgJodaTimeTzZoneInfoCompiler_Rule = { 2, "Rule", "org.joda.time.tz", "ZoneInfoCompiler", 0xa, 4, methods, 7, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgJodaTimeTzZoneInfoCompiler_Rule;
}

@end

void OrgJodaTimeTzZoneInfoCompiler_Rule_initWithJavaUtilStringTokenizer_(OrgJodaTimeTzZoneInfoCompiler_Rule *self, JavaUtilStringTokenizer *st) {
  NSObject_init(self);
  if ([((JavaUtilStringTokenizer *) nil_chk(st)) countTokens] < 6) {
    @throw create_JavaLangIllegalArgumentException_initWithNSString_(@"Attempting to create a Rule from an incomplete tokenizer");
  }
  JreStrongAssign(&self->iName_, [((NSString *) nil_chk([st nextToken])) intern]);
  self->iFromYear_ = OrgJodaTimeTzZoneInfoCompiler_parseYearWithNSString_withInt_([st nextToken], 0);
  self->iToYear_ = OrgJodaTimeTzZoneInfoCompiler_parseYearWithNSString_withInt_([st nextToken], self->iFromYear_);
  if (self->iToYear_ < self->iFromYear_) {
    @throw create_JavaLangIllegalArgumentException_init();
  }
  JreStrongAssign(&self->iType_, OrgJodaTimeTzZoneInfoCompiler_parseOptionalWithNSString_([st nextToken]));
  JreStrongAssignAndConsume(&self->iDateTimeOfYear_, new_OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear_initWithJavaUtilStringTokenizer_(st));
  self->iSaveMillis_ = OrgJodaTimeTzZoneInfoCompiler_parseTimeWithNSString_([st nextToken]);
  JreStrongAssign(&self->iLetterS_, OrgJodaTimeTzZoneInfoCompiler_parseOptionalWithNSString_([st nextToken]));
}

OrgJodaTimeTzZoneInfoCompiler_Rule *new_OrgJodaTimeTzZoneInfoCompiler_Rule_initWithJavaUtilStringTokenizer_(JavaUtilStringTokenizer *st) {
  OrgJodaTimeTzZoneInfoCompiler_Rule *self = [OrgJodaTimeTzZoneInfoCompiler_Rule alloc];
  OrgJodaTimeTzZoneInfoCompiler_Rule_initWithJavaUtilStringTokenizer_(self, st);
  return self;
}

OrgJodaTimeTzZoneInfoCompiler_Rule *create_OrgJodaTimeTzZoneInfoCompiler_Rule_initWithJavaUtilStringTokenizer_(JavaUtilStringTokenizer *st) {
  OrgJodaTimeTzZoneInfoCompiler_Rule *self = [[OrgJodaTimeTzZoneInfoCompiler_Rule alloc] autorelease];
  OrgJodaTimeTzZoneInfoCompiler_Rule_initWithJavaUtilStringTokenizer_(self, st);
  return self;
}

NSString *OrgJodaTimeTzZoneInfoCompiler_Rule_formatNameWithNSString_(OrgJodaTimeTzZoneInfoCompiler_Rule *self, NSString *nameFormat) {
  jint index = [((NSString *) nil_chk(nameFormat)) indexOf:'/'];
  if (index > 0) {
    if (self->iSaveMillis_ == 0) {
      return [((NSString *) nil_chk([nameFormat substring:0 endIndex:index])) intern];
    }
    else {
      return [((NSString *) nil_chk([nameFormat substring:index + 1])) intern];
    }
  }
  index = [nameFormat indexOfString:@"%s"];
  if (index < 0) {
    return nameFormat;
  }
  NSString *left = [nameFormat substring:0 endIndex:index];
  NSString *right = [nameFormat substring:index + 2];
  NSString *name;
  if (self->iLetterS_ == nil) {
    name = [((NSString *) nil_chk(left)) concat:right];
  }
  else {
    name = JreStrcat("$$$", left, self->iLetterS_, right);
  }
  return [((NSString *) nil_chk(name)) intern];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgJodaTimeTzZoneInfoCompiler_Rule)

@implementation OrgJodaTimeTzZoneInfoCompiler_RuleSet

- (instancetype)initWithOrgJodaTimeTzZoneInfoCompiler_Rule:(OrgJodaTimeTzZoneInfoCompiler_Rule *)rule {
  OrgJodaTimeTzZoneInfoCompiler_RuleSet_initWithOrgJodaTimeTzZoneInfoCompiler_Rule_(self, rule);
  return self;
}

- (void)addRuleWithOrgJodaTimeTzZoneInfoCompiler_Rule:(OrgJodaTimeTzZoneInfoCompiler_Rule *)rule {
  if (!([((NSString *) nil_chk(((OrgJodaTimeTzZoneInfoCompiler_Rule *) nil_chk(rule))->iName_)) isEqual:((OrgJodaTimeTzZoneInfoCompiler_Rule *) nil_chk([((id<JavaUtilList>) nil_chk(iRules_)) getWithInt:0]))->iName_])) {
    @throw create_JavaLangIllegalArgumentException_initWithNSString_(@"Rule name mismatch");
  }
  [iRules_ addWithId:rule];
}

- (void)addRecurringWithOrgJodaTimeTzDateTimeZoneBuilder:(OrgJodaTimeTzDateTimeZoneBuilder *)builder
                                            withNSString:(NSString *)nameFormat {
  for (jint i = 0; i < [((id<JavaUtilList>) nil_chk(iRules_)) size]; i++) {
    OrgJodaTimeTzZoneInfoCompiler_Rule *rule = [iRules_ getWithInt:i];
    [((OrgJodaTimeTzZoneInfoCompiler_Rule *) nil_chk(rule)) addRecurringWithOrgJodaTimeTzDateTimeZoneBuilder:builder withNSString:nameFormat];
  }
}

- (void)dealloc {
  RELEASE_(iRules_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgJodaTimeTzZoneInfoCompiler_Rule:", "RuleSet", NULL, 0x0, NULL, NULL },
    { "addRuleWithOrgJodaTimeTzZoneInfoCompiler_Rule:", "addRule", "V", 0x0, NULL, NULL },
    { "addRecurringWithOrgJodaTimeTzDateTimeZoneBuilder:withNSString:", "addRecurring", "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "iRules_", NULL, 0x2, "Ljava.util.List;", NULL, "Ljava/util/List<Lorg/joda/time/tz/ZoneInfoCompiler$Rule;>;", .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgJodaTimeTzZoneInfoCompiler_RuleSet = { 2, "RuleSet", "org.joda.time.tz", "ZoneInfoCompiler", 0xa, 3, methods, 1, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgJodaTimeTzZoneInfoCompiler_RuleSet;
}

@end

void OrgJodaTimeTzZoneInfoCompiler_RuleSet_initWithOrgJodaTimeTzZoneInfoCompiler_Rule_(OrgJodaTimeTzZoneInfoCompiler_RuleSet *self, OrgJodaTimeTzZoneInfoCompiler_Rule *rule) {
  NSObject_init(self);
  JreStrongAssignAndConsume(&self->iRules_, new_JavaUtilArrayList_init());
  [self->iRules_ addWithId:rule];
}

OrgJodaTimeTzZoneInfoCompiler_RuleSet *new_OrgJodaTimeTzZoneInfoCompiler_RuleSet_initWithOrgJodaTimeTzZoneInfoCompiler_Rule_(OrgJodaTimeTzZoneInfoCompiler_Rule *rule) {
  OrgJodaTimeTzZoneInfoCompiler_RuleSet *self = [OrgJodaTimeTzZoneInfoCompiler_RuleSet alloc];
  OrgJodaTimeTzZoneInfoCompiler_RuleSet_initWithOrgJodaTimeTzZoneInfoCompiler_Rule_(self, rule);
  return self;
}

OrgJodaTimeTzZoneInfoCompiler_RuleSet *create_OrgJodaTimeTzZoneInfoCompiler_RuleSet_initWithOrgJodaTimeTzZoneInfoCompiler_Rule_(OrgJodaTimeTzZoneInfoCompiler_Rule *rule) {
  OrgJodaTimeTzZoneInfoCompiler_RuleSet *self = [[OrgJodaTimeTzZoneInfoCompiler_RuleSet alloc] autorelease];
  OrgJodaTimeTzZoneInfoCompiler_RuleSet_initWithOrgJodaTimeTzZoneInfoCompiler_Rule_(self, rule);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgJodaTimeTzZoneInfoCompiler_RuleSet)

@implementation OrgJodaTimeTzZoneInfoCompiler_Zone

- (instancetype)initWithJavaUtilStringTokenizer:(JavaUtilStringTokenizer *)st {
  OrgJodaTimeTzZoneInfoCompiler_Zone_initWithJavaUtilStringTokenizer_(self, st);
  return self;
}

- (instancetype)initWithNSString:(NSString *)name
     withJavaUtilStringTokenizer:(JavaUtilStringTokenizer *)st {
  OrgJodaTimeTzZoneInfoCompiler_Zone_initWithNSString_withJavaUtilStringTokenizer_(self, name, st);
  return self;
}

- (void)chainWithJavaUtilStringTokenizer:(JavaUtilStringTokenizer *)st {
  if (iNext_ != nil) {
    [iNext_ chainWithJavaUtilStringTokenizer:st];
  }
  else {
    JreStrongAssignAndConsume(&iNext_, new_OrgJodaTimeTzZoneInfoCompiler_Zone_initWithNSString_withJavaUtilStringTokenizer_(iName_, st));
  }
}

- (void)addToBuilderWithOrgJodaTimeTzDateTimeZoneBuilder:(OrgJodaTimeTzDateTimeZoneBuilder *)builder
                                         withJavaUtilMap:(id<JavaUtilMap>)ruleSets {
  OrgJodaTimeTzZoneInfoCompiler_Zone_addToBuilderWithOrgJodaTimeTzZoneInfoCompiler_Zone_withOrgJodaTimeTzDateTimeZoneBuilder_withJavaUtilMap_(self, builder, ruleSets);
}

+ (void)addToBuilderWithOrgJodaTimeTzZoneInfoCompiler_Zone:(OrgJodaTimeTzZoneInfoCompiler_Zone *)zone
                      withOrgJodaTimeTzDateTimeZoneBuilder:(OrgJodaTimeTzDateTimeZoneBuilder *)builder
                                           withJavaUtilMap:(id<JavaUtilMap>)ruleSets {
  OrgJodaTimeTzZoneInfoCompiler_Zone_addToBuilderWithOrgJodaTimeTzZoneInfoCompiler_Zone_withOrgJodaTimeTzDateTimeZoneBuilder_withJavaUtilMap_(zone, builder, ruleSets);
}

- (NSString *)description {
  NSString *str = JreStrcat("$$$I$$$$$IC@", @"[Zone]\nName: ", iName_, @"\nOffsetMillis: ", iOffsetMillis_, @"\nRules: ", iRules_, @"\nFormat: ", iFormat_, @"\nUntilYear: ", iUntilYear_, 0x000a, iUntilDateTimeOfYear_);
  if (iNext_ == nil) {
    return str;
  }
  return JreStrcat("$$$", str, @"...\n", [((OrgJodaTimeTzZoneInfoCompiler_Zone *) nil_chk(iNext_)) description]);
}

- (void)dealloc {
  RELEASE_(iName_);
  RELEASE_(iRules_);
  RELEASE_(iFormat_);
  RELEASE_(iUntilDateTimeOfYear_);
  RELEASE_(iNext_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithJavaUtilStringTokenizer:", "Zone", NULL, 0x0, NULL, NULL },
    { "initWithNSString:withJavaUtilStringTokenizer:", "Zone", NULL, 0x2, NULL, NULL },
    { "chainWithJavaUtilStringTokenizer:", "chain", "V", 0x0, NULL, NULL },
    { "addToBuilderWithOrgJodaTimeTzDateTimeZoneBuilder:withJavaUtilMap:", "addToBuilder", "V", 0x1, NULL, "(Lorg/joda/time/tz/DateTimeZoneBuilder;Ljava/util/Map<Ljava/lang/String;Lorg/joda/time/tz/ZoneInfoCompiler$RuleSet;>;)V" },
    { "addToBuilderWithOrgJodaTimeTzZoneInfoCompiler_Zone:withOrgJodaTimeTzDateTimeZoneBuilder:withJavaUtilMap:", "addToBuilder", "V", 0xa, NULL, "(Lorg/joda/time/tz/ZoneInfoCompiler$Zone;Lorg/joda/time/tz/DateTimeZoneBuilder;Ljava/util/Map<Ljava/lang/String;Lorg/joda/time/tz/ZoneInfoCompiler$RuleSet;>;)V" },
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "iName_", NULL, 0x11, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
    { "iOffsetMillis_", NULL, 0x11, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "iRules_", NULL, 0x11, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
    { "iFormat_", NULL, 0x11, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
    { "iUntilYear_", NULL, 0x11, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "iUntilDateTimeOfYear_", NULL, 0x11, "Lorg.joda.time.tz.ZoneInfoCompiler$DateTimeOfYear;", NULL, NULL, .constantValue.asLong = 0 },
    { "iNext_", NULL, 0x2, "Lorg.joda.time.tz.ZoneInfoCompiler$Zone;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgJodaTimeTzZoneInfoCompiler_Zone = { 2, "Zone", "org.joda.time.tz", "ZoneInfoCompiler", 0xa, 6, methods, 7, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgJodaTimeTzZoneInfoCompiler_Zone;
}

@end

void OrgJodaTimeTzZoneInfoCompiler_Zone_initWithJavaUtilStringTokenizer_(OrgJodaTimeTzZoneInfoCompiler_Zone *self, JavaUtilStringTokenizer *st) {
  OrgJodaTimeTzZoneInfoCompiler_Zone_initWithNSString_withJavaUtilStringTokenizer_(self, [((JavaUtilStringTokenizer *) nil_chk(st)) nextToken], st);
}

OrgJodaTimeTzZoneInfoCompiler_Zone *new_OrgJodaTimeTzZoneInfoCompiler_Zone_initWithJavaUtilStringTokenizer_(JavaUtilStringTokenizer *st) {
  OrgJodaTimeTzZoneInfoCompiler_Zone *self = [OrgJodaTimeTzZoneInfoCompiler_Zone alloc];
  OrgJodaTimeTzZoneInfoCompiler_Zone_initWithJavaUtilStringTokenizer_(self, st);
  return self;
}

OrgJodaTimeTzZoneInfoCompiler_Zone *create_OrgJodaTimeTzZoneInfoCompiler_Zone_initWithJavaUtilStringTokenizer_(JavaUtilStringTokenizer *st) {
  OrgJodaTimeTzZoneInfoCompiler_Zone *self = [[OrgJodaTimeTzZoneInfoCompiler_Zone alloc] autorelease];
  OrgJodaTimeTzZoneInfoCompiler_Zone_initWithJavaUtilStringTokenizer_(self, st);
  return self;
}

void OrgJodaTimeTzZoneInfoCompiler_Zone_initWithNSString_withJavaUtilStringTokenizer_(OrgJodaTimeTzZoneInfoCompiler_Zone *self, NSString *name, JavaUtilStringTokenizer *st) {
  NSObject_init(self);
  JreStrongAssign(&self->iName_, [((NSString *) nil_chk(name)) intern]);
  self->iOffsetMillis_ = OrgJodaTimeTzZoneInfoCompiler_parseTimeWithNSString_([((JavaUtilStringTokenizer *) nil_chk(st)) nextToken]);
  JreStrongAssign(&self->iRules_, OrgJodaTimeTzZoneInfoCompiler_parseOptionalWithNSString_([st nextToken]));
  JreStrongAssign(&self->iFormat_, [((NSString *) nil_chk([st nextToken])) intern]);
  jint year = JavaLangInteger_MAX_VALUE;
  OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *dtOfYear = OrgJodaTimeTzZoneInfoCompiler_getStartOfYear();
  if ([st hasMoreTokens]) {
    year = JavaLangInteger_parseIntWithNSString_([st nextToken]);
    if ([st hasMoreTokens]) {
      dtOfYear = create_OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear_initWithJavaUtilStringTokenizer_(st);
    }
  }
  self->iUntilYear_ = year;
  JreStrongAssign(&self->iUntilDateTimeOfYear_, dtOfYear);
}

OrgJodaTimeTzZoneInfoCompiler_Zone *new_OrgJodaTimeTzZoneInfoCompiler_Zone_initWithNSString_withJavaUtilStringTokenizer_(NSString *name, JavaUtilStringTokenizer *st) {
  OrgJodaTimeTzZoneInfoCompiler_Zone *self = [OrgJodaTimeTzZoneInfoCompiler_Zone alloc];
  OrgJodaTimeTzZoneInfoCompiler_Zone_initWithNSString_withJavaUtilStringTokenizer_(self, name, st);
  return self;
}

OrgJodaTimeTzZoneInfoCompiler_Zone *create_OrgJodaTimeTzZoneInfoCompiler_Zone_initWithNSString_withJavaUtilStringTokenizer_(NSString *name, JavaUtilStringTokenizer *st) {
  OrgJodaTimeTzZoneInfoCompiler_Zone *self = [[OrgJodaTimeTzZoneInfoCompiler_Zone alloc] autorelease];
  OrgJodaTimeTzZoneInfoCompiler_Zone_initWithNSString_withJavaUtilStringTokenizer_(self, name, st);
  return self;
}

void OrgJodaTimeTzZoneInfoCompiler_Zone_addToBuilderWithOrgJodaTimeTzZoneInfoCompiler_Zone_withOrgJodaTimeTzDateTimeZoneBuilder_withJavaUtilMap_(OrgJodaTimeTzZoneInfoCompiler_Zone *zone, OrgJodaTimeTzDateTimeZoneBuilder *builder, id<JavaUtilMap> ruleSets) {
  OrgJodaTimeTzZoneInfoCompiler_Zone_initialize();
  for (; zone != nil; zone = zone->iNext_) {
    [((OrgJodaTimeTzDateTimeZoneBuilder *) nil_chk(builder)) setStandardOffsetWithInt:((OrgJodaTimeTzZoneInfoCompiler_Zone *) nil_chk(zone))->iOffsetMillis_];
    if (zone->iRules_ == nil) {
      [builder setFixedSavingsWithNSString:zone->iFormat_ withInt:0];
    }
    else {
      @try {
        jint saveMillis = OrgJodaTimeTzZoneInfoCompiler_parseTimeWithNSString_(zone->iRules_);
        [builder setFixedSavingsWithNSString:zone->iFormat_ withInt:saveMillis];
      }
      @catch (JavaLangException *e) {
        OrgJodaTimeTzZoneInfoCompiler_RuleSet *rs = [((id<JavaUtilMap>) nil_chk(ruleSets)) getWithId:zone->iRules_];
        if (rs == nil) {
          @throw create_JavaLangIllegalArgumentException_initWithNSString_(JreStrcat("$$", @"Rules not found: ", zone->iRules_));
        }
        [((OrgJodaTimeTzZoneInfoCompiler_RuleSet *) nil_chk(rs)) addRecurringWithOrgJodaTimeTzDateTimeZoneBuilder:builder withNSString:zone->iFormat_];
      }
    }
    if (zone->iUntilYear_ == JavaLangInteger_MAX_VALUE) {
      break;
    }
    [((OrgJodaTimeTzZoneInfoCompiler_DateTimeOfYear *) nil_chk(zone->iUntilDateTimeOfYear_)) addCutoverWithOrgJodaTimeTzDateTimeZoneBuilder:builder withInt:zone->iUntilYear_];
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgJodaTimeTzZoneInfoCompiler_Zone)
