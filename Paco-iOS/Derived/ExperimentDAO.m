//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/northropo/Projects/paco/Shared/src/com/pacoapp/paco/shared/model2/ExperimentDAO.java
//

#include "ExperimentDAO.h"
#include "ExperimentDAOCore.h"
#include "ExperimentGroup.h"
#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "ListMaker.h"
#include "Validator.h"
#include "java/lang/Boolean.h"
#include "java/lang/Integer.h"
#include "java/lang/Long.h"
#include "java/util/ArrayList.h"
#include "java/util/List.h"

@interface PAExperimentDAO () {
 @public
  NSString *modifyDate_;
  JavaLangBoolean *published_;
  id<JavaUtilList> admins_;
  id<JavaUtilList> publishedUsers_;
  JavaLangInteger *version__;
  NSString *ringtoneUri_;
  NSString *postInstallInstructions_;
}

@end

J2OBJC_FIELD_SETTER(PAExperimentDAO, modifyDate_, NSString *)
J2OBJC_FIELD_SETTER(PAExperimentDAO, published_, JavaLangBoolean *)
J2OBJC_FIELD_SETTER(PAExperimentDAO, admins_, id<JavaUtilList>)
J2OBJC_FIELD_SETTER(PAExperimentDAO, publishedUsers_, id<JavaUtilList>)
J2OBJC_FIELD_SETTER(PAExperimentDAO, version__, JavaLangInteger *)
J2OBJC_FIELD_SETTER(PAExperimentDAO, ringtoneUri_, NSString *)
J2OBJC_FIELD_SETTER(PAExperimentDAO, postInstallInstructions_, NSString *)

inline NSString *PAExperimentDAO_get_DEFAULT_POST_INSTALL_INSTRUCTIONS();
static NSString *PAExperimentDAO_DEFAULT_POST_INSTALL_INSTRUCTIONS = @"<b>You have successfully joined the experiment!</b><br/><br/>No need to do anything else for now.<br/><br/>Paco will send you a notification when it is time to participate.<br/><br/>Be sure your ringer/buzzer is on so you will hear the notification.";
J2OBJC_STATIC_FIELD_OBJ_FINAL(PAExperimentDAO, DEFAULT_POST_INSTALL_INSTRUCTIONS, NSString *)

@implementation PAExperimentDAO

- (instancetype)initWithJavaLangLong:(JavaLangLong *)id_
                        withNSString:(NSString *)title
                        withNSString:(NSString *)description_
                        withNSString:(NSString *)informedConsentForm
                        withNSString:(NSString *)email
                        withNSString:(NSString *)joinDate
                        withNSString:(NSString *)modifyDate
                 withJavaLangBoolean:(JavaLangBoolean *)published
                    withJavaUtilList:(id<JavaUtilList>)admins
                    withJavaUtilList:(id<JavaUtilList>)publishedUsers
                 withJavaLangBoolean:(JavaLangBoolean *)deleted
                 withJavaLangInteger:(JavaLangInteger *)version_
                 withJavaLangBoolean:(JavaLangBoolean *)recordPhoneDetails
                    withJavaUtilList:(id<JavaUtilList>)groups
                    withJavaUtilList:(id<JavaUtilList>)extraDataDeclarations {
  PAExperimentDAO_initWithJavaLangLong_withNSString_withNSString_withNSString_withNSString_withNSString_withNSString_withJavaLangBoolean_withJavaUtilList_withJavaUtilList_withJavaLangBoolean_withJavaLangInteger_withJavaLangBoolean_withJavaUtilList_withJavaUtilList_(self, id_, title, description_, informedConsentForm, email, joinDate, modifyDate, published, admins, publishedUsers, deleted, version_, recordPhoneDetails, groups, extraDataDeclarations);
  return self;
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  PAExperimentDAO_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (NSString *)getModifyDate {
  return modifyDate_;
}

- (void)setModifyDateWithNSString:(NSString *)modifyDate {
  self->modifyDate_ = modifyDate;
}

- (JavaLangBoolean *)getPublished {
  return published_;
}

- (void)setPublishedWithJavaLangBoolean:(JavaLangBoolean *)published {
  self->published_ = published;
}

- (id<JavaUtilList>)getAdmins {
  return admins_;
}

- (void)setAdminsWithJavaUtilList:(id<JavaUtilList>)admins {
  self->admins_ = admins;
}

- (id<JavaUtilList>)getPublishedUsers {
  return publishedUsers_;
}

- (void)setPublishedUsersWithJavaUtilList:(id<JavaUtilList>)publishedUsers {
  self->publishedUsers_ = publishedUsers;
}

- (JavaLangInteger *)getVersion {
  return version__;
}

- (void)setVersionWithJavaLangInteger:(JavaLangInteger *)version_ {
  self->version__ = version_;
}

- (id<JavaUtilList>)getGroups {
  return groups_;
}

- (void)setGroupsWithJavaUtilList:(id<JavaUtilList>)groups {
  self->groups_ = groups;
}

- (PAExperimentGroup *)getGroupByNameWithNSString:(NSString *)groupName {
  for (PAExperimentGroup * __strong group in nil_chk(groups_)) {
    if ([((NSString *) nil_chk([((PAExperimentGroup *) nil_chk(group)) getName])) isEqual:groupName]) {
      return group;
    }
  }
  return nil;
}

- (jboolean)isWhoAllowedToPostToExperimentWithNSString:(NSString *)who {
  who = [((NSString *) nil_chk(who)) lowercaseString];
  return [self isAdminWithNSString:who] || ([((JavaLangBoolean *) nil_chk([self getPublished])) booleanValue] && ([((id<JavaUtilList>) nil_chk([self getPublishedUsers])) isEmpty] || [((id<JavaUtilList>) nil_chk([self getPublishedUsers])) containsWithId:who]));
}

- (jboolean)isAdminWithNSString:(NSString *)who {
  return [((id<JavaUtilList>) nil_chk([self getAdmins])) containsWithId:who];
}

- (void)validateWithWithPAValidator:(id<PAValidator>)validator {
  [super validateWithWithPAValidator:validator];
  [((id<PAValidator>) nil_chk(validator)) isValidCollectionOfEmailAddressesWithJavaUtilCollection:admins_ withNSString:@"admins should be a valid list of email addresses"];
  [validator isNotNullAndNonEmptyCollectionWithJavaUtilCollection:groups_ withNSString:@"there should be at least one experiment group"];
  if (publishedUsers_ != nil && ![publishedUsers_ isEmpty]) {
    [validator isValidCollectionOfEmailAddressesWithJavaUtilCollection:publishedUsers_ withNSString:@"published users should contain valid email addresses"];
  }
  id<JavaUtilList> groupNames = new_JavaUtilArrayList_init();
  id<JavaUtilList> endOfDayGroups = new_JavaUtilArrayList_init();
  for (PAExperimentGroup * __strong group in nil_chk(groups_)) {
    if ([groupNames containsWithId:[((PAExperimentGroup *) nil_chk(group)) getName]]) {
      [validator addErrorWithNSString:JreStrcat("$$$", @"Group name: ", [group getName], @" is not unique. Group names must be unique")];
    }
    [groupNames addWithId:[group getName]];
    [group validateWithWithPAValidator:validator];
    if ([((JavaLangBoolean *) nil_chk([group getEndOfDayGroup])) booleanValue]) {
      [endOfDayGroups addWithId:group];
    }
  }
  if (![endOfDayGroups isEmpty]) {
    for (PAExperimentGroup * __strong experimentGroup in endOfDayGroups) {
      NSString *referredGroup = [((PAExperimentGroup *) nil_chk(experimentGroup)) getEndOfDayReferredGroupName];
      if (referredGroup != nil) {
        [validator isTrueWithBoolean:[groupNames containsWithId:referredGroup] withNSString:@"the group to which the end of day group refers does not exist"];
      }
    }
  }
  [validator isNotNullWithId:version__ withNSString:@"version is unspecified"];
  if (version__ != nil && [version__ intValue] > 1) {
    [validator isNotNullWithId:id__ withNSString:@"editing an existing version, database id should not be null"];
  }
}

- (NSString *)getRingtoneUri {
  return ringtoneUri_;
}

- (void)setRingtoneUriWithNSString:(NSString *)ringtoneUri {
  self->ringtoneUri_ = ringtoneUri;
}

- (NSString *)getPostInstallInstructions {
  return postInstallInstructions_ != nil ? postInstallInstructions_ : PAExperimentDAO_DEFAULT_POST_INSTALL_INSTRUCTIONS;
}

- (void)setPostInstallInstructionsWithNSString:(NSString *)instructions {
  self->postInstallInstructions_ = instructions;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithJavaLangLong:withNSString:withNSString:withNSString:withNSString:withNSString:withNSString:withJavaLangBoolean:withJavaUtilList:withJavaUtilList:withJavaLangBoolean:withJavaLangInteger:withJavaLangBoolean:withJavaUtilList:withJavaUtilList:", "ExperimentDAO", NULL, 0x1, NULL, "(Ljava/lang/Long;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/Boolean;Ljava/util/List<Ljava/lang/String;>;Ljava/util/List<Ljava/lang/String;>;Ljava/lang/Boolean;Ljava/lang/Integer;Ljava/lang/Boolean;Ljava/util/List<Lcom/pacoapp/paco/shared/model2/ExperimentGroup;>;Ljava/util/List<Ljava/lang/Integer;>;)V" },
    { "init", "ExperimentDAO", NULL, 0x1, NULL, NULL },
    { "getModifyDate", NULL, "Ljava.lang.String;", 0x1, NULL, NULL },
    { "setModifyDateWithNSString:", "setModifyDate", "V", 0x1, NULL, NULL },
    { "getPublished", NULL, "Ljava.lang.Boolean;", 0x1, NULL, NULL },
    { "setPublishedWithJavaLangBoolean:", "setPublished", "V", 0x1, NULL, NULL },
    { "getAdmins", NULL, "Ljava.util.List;", 0x1, NULL, "()Ljava/util/List<Ljava/lang/String;>;" },
    { "setAdminsWithJavaUtilList:", "setAdmins", "V", 0x1, NULL, "(Ljava/util/List<Ljava/lang/String;>;)V" },
    { "getPublishedUsers", NULL, "Ljava.util.List;", 0x1, NULL, "()Ljava/util/List<Ljava/lang/String;>;" },
    { "setPublishedUsersWithJavaUtilList:", "setPublishedUsers", "V", 0x1, NULL, "(Ljava/util/List<Ljava/lang/String;>;)V" },
    { "getVersion", NULL, "Ljava.lang.Integer;", 0x1, NULL, NULL },
    { "setVersionWithJavaLangInteger:", "setVersion", "V", 0x1, NULL, NULL },
    { "getGroups", NULL, "Ljava.util.List;", 0x1, NULL, "()Ljava/util/List<Lcom/pacoapp/paco/shared/model2/ExperimentGroup;>;" },
    { "setGroupsWithJavaUtilList:", "setGroups", "V", 0x1, NULL, "(Ljava/util/List<Lcom/pacoapp/paco/shared/model2/ExperimentGroup;>;)V" },
    { "getGroupByNameWithNSString:", "getGroupByName", "Lcom.pacoapp.paco.shared.model2.ExperimentGroup;", 0x1, NULL, NULL },
    { "isWhoAllowedToPostToExperimentWithNSString:", "isWhoAllowedToPostToExperiment", "Z", 0x1, NULL, NULL },
    { "isAdminWithNSString:", "isAdmin", "Z", 0x1, NULL, NULL },
    { "validateWithWithPAValidator:", "validateWith", "V", 0x1, NULL, NULL },
    { "getRingtoneUri", NULL, "Ljava.lang.String;", 0x1, NULL, NULL },
    { "setRingtoneUriWithNSString:", "setRingtoneUri", "V", 0x1, NULL, NULL },
    { "getPostInstallInstructions", NULL, "Ljava.lang.String;", 0x1, NULL, NULL },
    { "setPostInstallInstructionsWithNSString:", "setPostInstallInstructions", "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "DEFAULT_POST_INSTALL_INSTRUCTIONS", "DEFAULT_POST_INSTALL_INSTRUCTIONS", 0x1a, "Ljava.lang.String;", &PAExperimentDAO_DEFAULT_POST_INSTALL_INSTRUCTIONS, NULL, .constantValue.asLong = 0 },
    { "modifyDate_", NULL, 0x2, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
    { "published_", NULL, 0x2, "Ljava.lang.Boolean;", NULL, NULL, .constantValue.asLong = 0 },
    { "admins_", NULL, 0x2, "Ljava.util.List;", NULL, "Ljava/util/List<Ljava/lang/String;>;", .constantValue.asLong = 0 },
    { "publishedUsers_", NULL, 0x2, "Ljava.util.List;", NULL, "Ljava/util/List<Ljava/lang/String;>;", .constantValue.asLong = 0 },
    { "version__", "version", 0x2, "Ljava.lang.Integer;", NULL, NULL, .constantValue.asLong = 0 },
    { "groups_", NULL, 0x4, "Ljava.util.List;", NULL, "Ljava/util/List<Lcom/pacoapp/paco/shared/model2/ExperimentGroup;>;", .constantValue.asLong = 0 },
    { "ringtoneUri_", NULL, 0x2, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
    { "postInstallInstructions_", NULL, 0x2, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _PAExperimentDAO = { 2, "ExperimentDAO", "com.pacoapp.paco.shared.model2", NULL, 0x1, 22, methods, 9, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_PAExperimentDAO;
}

@end

void PAExperimentDAO_initWithJavaLangLong_withNSString_withNSString_withNSString_withNSString_withNSString_withNSString_withJavaLangBoolean_withJavaUtilList_withJavaUtilList_withJavaLangBoolean_withJavaLangInteger_withJavaLangBoolean_withJavaUtilList_withJavaUtilList_(PAExperimentDAO *self, JavaLangLong *id_, NSString *title, NSString *description_, NSString *informedConsentForm, NSString *email, NSString *joinDate, NSString *modifyDate, JavaLangBoolean *published, id<JavaUtilList> admins, id<JavaUtilList> publishedUsers, JavaLangBoolean *deleted, JavaLangInteger *version_, JavaLangBoolean *recordPhoneDetails, id<JavaUtilList> groups, id<JavaUtilList> extraDataDeclarations) {
  PAExperimentDAOCore_initWithJavaLangLong_withNSString_withNSString_withNSString_withNSString_withNSString_withJavaLangBoolean_withJavaLangBoolean_withJavaUtilList_withNSString_withNSString_withNSString_withJavaUtilDate_withJavaUtilDate_(self, id_, title, description_, informedConsentForm, email, joinDate, recordPhoneDetails, deleted, extraDataDeclarations, nil, nil, nil, nil, nil);
  self->version__ = JavaLangInteger_valueOfWithInt_(1);
  self->id__ = id_;
  self->title_ = title;
  self->description__ = description_;
  self->informedConsentForm_ = informedConsentForm;
  self->creator_ = email;
  self->modifyDate_ = modifyDate;
  self->published_ = published;
  self->admins_ = PAListMaker_paramOrNewListWithJavaUtilList_withIOSClass_(admins, NSString_class_());
  self->publishedUsers_ = PAListMaker_paramOrNewListWithJavaUtilList_withIOSClass_(publishedUsers, NSString_class_());
  self->version__ = version_;
  self->groups_ = PAListMaker_paramOrNewListWithJavaUtilList_withIOSClass_(groups, PAExperimentGroup_class_());
}

PAExperimentDAO *new_PAExperimentDAO_initWithJavaLangLong_withNSString_withNSString_withNSString_withNSString_withNSString_withNSString_withJavaLangBoolean_withJavaUtilList_withJavaUtilList_withJavaLangBoolean_withJavaLangInteger_withJavaLangBoolean_withJavaUtilList_withJavaUtilList_(JavaLangLong *id_, NSString *title, NSString *description_, NSString *informedConsentForm, NSString *email, NSString *joinDate, NSString *modifyDate, JavaLangBoolean *published, id<JavaUtilList> admins, id<JavaUtilList> publishedUsers, JavaLangBoolean *deleted, JavaLangInteger *version_, JavaLangBoolean *recordPhoneDetails, id<JavaUtilList> groups, id<JavaUtilList> extraDataDeclarations) {
  PAExperimentDAO *self = [PAExperimentDAO alloc];
  PAExperimentDAO_initWithJavaLangLong_withNSString_withNSString_withNSString_withNSString_withNSString_withNSString_withJavaLangBoolean_withJavaUtilList_withJavaUtilList_withJavaLangBoolean_withJavaLangInteger_withJavaLangBoolean_withJavaUtilList_withJavaUtilList_(self, id_, title, description_, informedConsentForm, email, joinDate, modifyDate, published, admins, publishedUsers, deleted, version_, recordPhoneDetails, groups, extraDataDeclarations);
  return self;
}

PAExperimentDAO *create_PAExperimentDAO_initWithJavaLangLong_withNSString_withNSString_withNSString_withNSString_withNSString_withNSString_withJavaLangBoolean_withJavaUtilList_withJavaUtilList_withJavaLangBoolean_withJavaLangInteger_withJavaLangBoolean_withJavaUtilList_withJavaUtilList_(JavaLangLong *id_, NSString *title, NSString *description_, NSString *informedConsentForm, NSString *email, NSString *joinDate, NSString *modifyDate, JavaLangBoolean *published, id<JavaUtilList> admins, id<JavaUtilList> publishedUsers, JavaLangBoolean *deleted, JavaLangInteger *version_, JavaLangBoolean *recordPhoneDetails, id<JavaUtilList> groups, id<JavaUtilList> extraDataDeclarations) {
  return new_PAExperimentDAO_initWithJavaLangLong_withNSString_withNSString_withNSString_withNSString_withNSString_withNSString_withJavaLangBoolean_withJavaUtilList_withJavaUtilList_withJavaLangBoolean_withJavaLangInteger_withJavaLangBoolean_withJavaUtilList_withJavaUtilList_(id_, title, description_, informedConsentForm, email, joinDate, modifyDate, published, admins, publishedUsers, deleted, version_, recordPhoneDetails, groups, extraDataDeclarations);
}

void PAExperimentDAO_init(PAExperimentDAO *self) {
  PAExperimentDAOCore_init(self);
  self->version__ = JavaLangInteger_valueOfWithInt_(1);
  self->admins_ = new_JavaUtilArrayList_init();
  self->publishedUsers_ = new_JavaUtilArrayList_init();
  self->groups_ = new_JavaUtilArrayList_init();
}

PAExperimentDAO *new_PAExperimentDAO_init() {
  PAExperimentDAO *self = [PAExperimentDAO alloc];
  PAExperimentDAO_init(self);
  return self;
}

PAExperimentDAO *create_PAExperimentDAO_init() {
  return new_PAExperimentDAO_init();
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(PAExperimentDAO)
