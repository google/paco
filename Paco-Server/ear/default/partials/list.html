<div class="list">
  <p>
    <md-button class="md-raised" ng-click="addExperiment()">
      Create New Experiment
    </md-button>
  </p>
  <md-progress-circular md-mode="indeterminate" ng-if="!experiments && user">
  </md-progress-circular>

  <div ng-if="experiments" class="group">
    Administered Experiments
    <div ng-repeat="exp in experiments | orderBy: 'title'">
      <md-card>
        <md-card-content class="padded">
          <a href="#/experiment/{{exp.id}}">{{exp.title}}
        </a>
          <span ng-if="exp.organization" class="organization">
            administered by {{exp.organization}}
          </span>

          <span class="admin">Admin</span>

        </md-card-content>

        <div class="md-actions">
          <a href="#/experiment/{{exp.id}}">
            <md-button>
              Edit
            </md-button>
          </a>

          <a href="participantStats?experimentId={{exp.id}}" target="_new">
            <md-button>
              Stats
            </md-button>
          </a>

          <a href="#/data/{{exp.id}}">
            <md-button>
              View Data
            </md-button>
          </a>

          <a href="#/data/{{exp.id}}#anon">
            <md-button>
              Anon Data
            </md-button>
          </a>
          
          <a href="#" ng-controller="JoinCtrl" ng-model="exp" ng-click="joinExperiment()">
            <md-button>
              Join
            </md-button>
          </a>

<!--           <a href="#"  ng-controller="EodCtrl" ng-model="exp" ng-click="showEod()">
            <md-button>
              EOD
            </md-button>
          </a> -->

        </div>
      </md-card>
    </div>
  </div>

  <div ng-if="joined" class="group">
    Joined Experiments
    <div ng-repeat="exp in joined | orderBy:'title'">
      <md-card>
        <md-card-content class="padded">
          <a href="#/experiment/{{exp.id}}">{{exp.title}}</a>
          <span ng-if="exp.organization" class="organization">
            administered by {{exp.organization}}
          </span>
          <span class="participant">Participant</span>
        </md-card-content>

        <div class="md-actions">
            <a href="#/respond/{{exp.id}}">
              <md-button>
                Respond
              </md-button>
            </a>

            <a href="#/data/{{exp.id}}#mine">
              <md-button>
                View Data
              </md-button>
            </a>

            <a href="participantStats?experimentId={{exp.id}}" target="_new">
              <md-button>
                Stats
              </md-button>
            </a>
<!-- 
            <a href="#"  ng-controller="EodCtrl" ng-model="exp" ng-click="showEod()"
              ng-if="eodExperiments[exp.id]">
              <md-button>
                EOD
              </md-button>
            </a> -->
          </div>
      </md-card>
    </div>
  </div>

  <div ng-if="joinable" class="group">
    Joinable Experiments
    <div ng-repeat="exp in joinable" ng-if="joinedIndex.indexOf(exp.id) === -1">
      <md-card>
        <md-card-content class="padded">
          <a href="#/experiment/{{exp.id}}">{{exp.title}}</a>
          <span ng-if="exp.organization" class="organization">
            administered by {{exp.organization}}
          </span>

          <a href="#" ng-controller="JoinCtrl" ng-model="exp" 
            ng-click="joinExperiment()" class="join">
            <md-button>
              Join
            </md-button>
          </a>
        </md-card-content>

      </md-card>
    </div>
  </div>


</div>
